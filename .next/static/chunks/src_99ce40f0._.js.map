{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/ai/flows/personalized-recommendations.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview Provides personalized recommendations for habits and readings based on the user's mood.\n *\n * - getPersonalizedRecommendations - A function that takes mood and journal text and returns recommendations.\n * - PersonalizedRecommendationsInput - The input type for the getPersonalizedRecommendations function.\n * - PersonalizedRecommendationsOutput - The return type for the getPersonalizedRecommendations function.\n */\n\n// Import geminiFlash from the central config file\nimport {ai, geminiFlash} from '@/ai/genkit';\nimport {z} from 'genkit';\nimport { libraryItems } from '@/lib/data';\n\nconst bookSchema = z.object({\n  title: z.string(),\n  author: z.string(),\n});\n\n// Simplified Input Schema (no voiceAnalysis)\nconst PersonalizedRecommendationsInputSchema = z.object({\n  mood: z.string().describe('The current mood of the user.'),\n  journalText: z.string().optional().describe(\"The user's journal entry, if provided.\"),\n  books: z.array(bookSchema).describe('A list of available books in the library.'),\n});\nexport type PersonalizedRecommendationsInput = z.infer<\n  typeof PersonalizedRecommendationsInputSchema\n>;\n\nconst PersonalizedRecommendationsOutputSchema = z.object({\n  inspirationalPhrase: z\n    .string()\n    .describe('Una frase emp치tica y motivadora corta (1-2 l칤neas) basada en el estado de 치nimo y el diario del usuario.'),\n  habitRecommendation: z\n    .string()\n    .describe('Un h치bito simple y accionable basado en la situaci칩n del usuario.'),\n  readingRecommendation: z\n    .string()\n    .describe('Un libro de la biblioteca que sea relevante para la situaci칩n actual del usuario. Formato: \"T칤tulo por Autor\".'),\n  symbolicPhrase: z\n    .string()\n    .describe('Una frase corta, po칠tica y simb칩lica que act칰e como un \"eco\" emp치tico de los pensamientos del usuario. Ejemplo: \"Incluso en la quietud, tu luz sigue brillando.'),\n});\nexport type PersonalizedRecommendationsOutput = z.infer<\n  typeof PersonalizedRecommendationsOutputSchema\n>;\n\nexport async function getPersonalizedRecommendations(\n  input: Omit<PersonalizedRecommendationsInput, 'books'>\n): Promise<PersonalizedRecommendationsOutput> {\n  const books = libraryItems.map(({ title, author }) => ({ title, author }));\n  return personalizedRecommendationsFlow({ ...input, books });\n}\n\n// Simplified Prompt (no voice analysis)\nconst prompt = ai.definePrompt({\n  name: 'personalizedRecommendationsPrompt',\n  // Explicitly set the model to the one defined in genkit.ts\n  model: geminiFlash,\n  input: {schema: PersonalizedRecommendationsInputSchema},\n  output: {schema: PersonalizedRecommendationsOutputSchema},\n  prompt: `Eres Cero, un asistente de IA excepcionalmente emp치tico y experto en bienestar. Tu objetivo es proporcionar apoyo profundo y personalizado.\n\nUn usuario ha compartido c칩mo se siente.\n- Estado de 치nimo: {{{mood}}}\n{{#if journalText}}\n- Pensamientos: {{{journalText}}}\n{{/if}}\n\nTu tarea es responder con un 칰nico objeto JSON que se adhiera al siguiente esquema. No a침adas texto ni explicaciones fuera del objeto JSON.\n\\`\\`\\`json\n{\n  \"inspirationalPhrase\": \"Una frase emp치tica y motivadora corta (1-2 l칤neas) basada en el estado de 치nimo y el diario del usuario.\",\n  \"habitRecommendation\": \"Un h치bito simple y accionable basado en la situaci칩n del usuario.\",\n  \"readingRecommendation\": \"Un libro de la biblioteca que sea relevante para la situaci칩n actual del usuario. Formato: 'T칤tulo por Autor'.\",\n  \"symbolicPhrase\": \"Una frase corta, po칠tica y simb칩lica que act칰e como un 'eco' emp치tico de los pensamientos del usuario. Debe ser como un espejo, reflejando el tono y el sentimiento de su entrada en el diario. Por ejemplo, si el usuario se siente 'cansado pero esperanzado', una buena frase ser칤a: 'Incluso en la quietud, tu luz sigue brillando.'\"\n}\n\\`\\`\\`\n\nAnaliza profundamente el estado de 치nimo y los pensamientos del usuario para generar los valores para cada campo.\nPara 'readingRecommendation', elige el libro m치s relevante de la siguiente lista. Var칤a tus sugerencias.\n\nLibros disponibles:\n{{#each books}}\n- {{{this.title}}} por {{{this.author}}}\n{{/each}}`,\n});\n\nconst personalizedRecommendationsFlow = ai.defineFlow(\n  {\n    name: 'personalizedRecommendationsFlow',\n    inputSchema: PersonalizedRecommendationsInputSchema,\n    outputSchema: PersonalizedRecommendationsOutputSchema,\n  },\n  async input => {\n    if (!process.env.GEMINI_API_KEY) {\n      console.error('GEMINI_API_KEY environment variable not set.');\n      return {\n        inspirationalPhrase: 'Error de Configuraci칩n: La clave de API para el servicio de IA no est치 definida.',\n        habitRecommendation: 'A침ade tu clave en un archivo .env para recibir sugerencias.',\n        readingRecommendation: 'Int칠ntalo de nuevo despu칠s de configurar la clave.',\n        symbolicPhrase: 'La conexi칩n con tu gu칤a interior est치 esperando.',\n      };\n    }\n    try {\n      const {output} = await prompt(input);\n      return output!;\n    } catch (e) {\n      console.error('AI recommendation flow failed, providing fallback:', e);\n      if (e instanceof Error && (e.message.includes('API key') || e.message.includes('authentication'))) {\n         return {\n          inspirationalPhrase: 'Error de autenticaci칩n con la IA.',\n          habitRecommendation: 'La clave de API podr칤a no ser v치lida.',\n          readingRecommendation: 'Por favor, verifica tu configuraci칩n.',\n          symbolicPhrase: 'Parece que hay una interferencia en la se침al.',\n        };\n      }\n      // Return a default recommendation that is more random\n      const fallbackBook = libraryItems[Math.floor(Math.random() * libraryItems.length)] || { title: 'un libro', author: 'un autor' };\n      return {\n        inspirationalPhrase: 'Recuerda ser amable contigo mismo. Cada d칤a es una nueva oportunidad.',\n        habitRecommendation: 'Dedica 5 minutos a la lectura consciente.',\n        readingRecommendation: `${fallbackBook.title} por ${fallbackBook.author}`,\n        symbolicPhrase: 'Cada momento es un nuevo comienzo.',\n      };\n    }\n  }\n);\n"],"names":[],"mappings":";;;;;;;IAgDsB,iCAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/components/dashboard/cero-bot.tsx"],"sourcesContent":["import { Bot } from \"lucide-react\";\n\nexport function CeroBot() {\n  return (\n    <div className=\"relative flex items-center justify-center w-24 h-24\">\n      <div className=\"absolute w-full h-full rounded-full bg-primary/10 animate-pulse\"></div>\n      <div className=\"absolute w-2/3 h-2/3 rounded-full bg-primary/20 animate-pulse [animation-delay:-0.5s]\"></div>\n      <Bot className=\"relative w-12 h-12 text-primary\" />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS;IACd,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC,0MAAG;gBAAC,WAAU;;;;;;;;;;;;AAGrB;KARgB","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/components/dashboard/mood-selector.tsx"],"sourcesContent":["\"use client\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTranslation } from \"../providers/language-provider\";\n\ntype MoodSelectorProps = {\n  onMoodSelect: (mood: string) => void;\n  selectedMood: string | null;\n  disabled: boolean;\n};\n\nexport function MoodSelector({ onMoodSelect, selectedMood, disabled }: MoodSelectorProps) {\n  const { t } = useTranslation();\n\n  const moods = [\n    { emoji: \"游땕\", label: t(\"dashboard.mood.feliz\") },\n    { emoji: \"游땗\", label: t(\"dashboard.mood.calmado\") },\n    { emoji: \"游뱂\", label: t(\"dashboard.mood.pensativo\") },\n    { emoji: \"游땰\", label: t(\"dashboard.mood.cansado\") },\n    { emoji: \"游땫\", label: t(\"dashboard.mood.estresado\") },\n    { emoji: \"游땩\", label: t(\"dashboard.mood.triste\") },\n  ];\n  \n  return (\n    <div className=\"flex flex-wrap items-center justify-center gap-2 sm:gap-4\">\n      {moods.map(({ emoji, label }) => (\n        <Button\n          key={label}\n          variant={selectedMood === label ? \"default\" : \"outline\"}\n          size=\"lg\"\n          className=\"flex flex-col items-center justify-center h-24 w-24 rounded-2xl gap-2 text-3xl transition-all duration-300 transform hover:scale-105 active:scale-95\"\n          onClick={() => onMoodSelect(label)}\n          disabled={disabled}\n          aria-pressed={selectedMood === label}\n        >\n          <span role=\"img\" aria-label={label}>{emoji}</span>\n          <span className=\"text-xs font-medium\">{label}</span>\n        </Button>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAUO,SAAS,aAAa,KAA2D;QAA3D,EAAE,YAAY,EAAE,YAAY,EAAE,QAAQ,EAAqB,GAA3D;;IAC3B,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,4KAAc;IAE5B,MAAM,QAAQ;QACZ;YAAE,OAAO;YAAM,OAAO,EAAE;QAAwB;QAChD;YAAE,OAAO;YAAM,OAAO,EAAE;QAA0B;QAClD;YAAE,OAAO;YAAM,OAAO,EAAE;QAA4B;QACpD;YAAE,OAAO;YAAM,OAAO,EAAE;QAA0B;QAClD;YAAE,OAAO;YAAM,OAAO,EAAE;QAA4B;QACpD;YAAE,OAAO;YAAM,OAAO,EAAE;QAAyB;KAClD;IAED,qBACE,6LAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC;gBAAC,EAAE,KAAK,EAAE,KAAK,EAAE;iCAC1B,6LAAC,+IAAM;gBAEL,SAAS,iBAAiB,QAAQ,YAAY;gBAC9C,MAAK;gBACL,WAAU;gBACV,SAAS,IAAM,aAAa;gBAC5B,UAAU;gBACV,gBAAc,iBAAiB;;kCAE/B,6LAAC;wBAAK,MAAK;wBAAM,cAAY;kCAAQ;;;;;;kCACrC,6LAAC;wBAAK,WAAU;kCAAuB;;;;;;;eATlC;;;;;;;;;;;AAcf;GA9BgB;;QACA,4KAAc;;;KADd","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-2xl border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,6DACA;QAED,GAAG,KAAK;;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/components/dashboard/recommendation-card.tsx"],"sourcesContent":["import { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Repeat, BookOpen, Quote, Sparkles, Star } from \"lucide-react\";\nimport type { PersonalizedRecommendationsOutput } from \"@/ai/flows/personalized-recommendations\";\nimport { useTranslation } from \"../providers/language-provider\";\n\ntype RecommendationCardProps = {\n  loading: boolean;\n  recommendations: PersonalizedRecommendationsOutput | null;\n  mood: string | null;\n};\n\nexport function RecommendationCard({ loading, recommendations, mood }: RecommendationCardProps) {\n  const { t } = useTranslation();\n  \n  if (loading) {\n    return (\n      <Card className=\"w-full max-w-2xl\">\n        <CardHeader>\n          <Skeleton className=\"h-6 w-3/4\" />\n          <Skeleton className=\"h-4 w-1/2 mt-2\" />\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"flex items-start gap-4\">\n            <Skeleton className=\"w-8 h-8 rounded-full\" />\n            <div className=\"flex-1 space-y-2\">\n              <Skeleton className=\"h-4 w-1/4\" />\n              <Skeleton className=\"h-4 w-full\" />\n            </div>\n          </div>\n          <div className=\"flex items-start gap-4\">\n            <Skeleton className=\"w-8 h-8 rounded-full\" />\n            <div className=\"flex-1 space-y-2\">\n              <Skeleton className=\"h-4 w-1/4\" />\n              <Skeleton className=\"h-4 w-full\" />\n            </div>\n          </div>\n           <div className=\"flex items-start gap-4\">\n            <Skeleton className=\"w-8 h-8 rounded-full\" />\n            <div className=\"flex-1 space-y-2\">\n              <Skeleton className=\"h-4 w-1/4\" />\n              <Skeleton className=\"h-4 w-full\" />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!recommendations) {\n    return null;\n  }\n\n  return (\n    <Card className=\"w-full max-w-2xl animate-in fade-in-50 duration-500\">\n      <CardHeader>\n        <CardTitle className=\"font-headline flex items-center gap-2\"><Sparkles className=\"text-accent\"/>{t('recommendationCard.title')}</CardTitle>\n        <CardDescription>{t('recommendationCard.description', { mood: mood?.toLowerCase() })}</CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {recommendations.inspirationalPhrase && (\n             <div className=\"flex items-start gap-4\">\n                <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-secondary flex items-center justify-center\">\n                    <Quote className=\"w-5 h-5 text-secondary-foreground\" />\n                </div>\n                <div>\n                    <h3 className=\"font-semibold text-foreground\">{t('recommendationCard.phrase')}</h3>\n                    <p className=\"text-muted-foreground italic\">\"{recommendations.inspirationalPhrase}\"</p>\n                </div>\n            </div>\n        )}\n\n        {recommendations.symbolicPhrase && (\n             <div className=\"flex items-start gap-4\">\n                <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-secondary flex items-center justify-center\">\n                    <Star className=\"w-5 h-5 text-secondary-foreground\" />\n                </div>\n                <div>\n                    <h3 className=\"font-semibold text-foreground\">{t('recommendationCard.symbolicPhrase')}</h3>\n                    <p className=\"text-muted-foreground italic\">\"{recommendations.symbolicPhrase}\"</p>\n                </div>\n            </div>\n        )}\n\n        <div className=\"flex items-start gap-4\">\n        <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-secondary flex items-center justify-center\">\n            <Repeat className=\"w-5 h-5 text-secondary-foreground\" />\n        </div>\n        <div>\n            <h3 className=\"font-semibold text-foreground\">{t('recommendationCard.habit')}</h3>\n            <p className=\"text-muted-foreground\">{recommendations.habitRecommendation}</p>\n        </div>\n        </div>\n        <div className=\"flex items-start gap-4\">\n        <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-secondary flex items-center justify-center\">\n            <BookOpen className=\"w-5 h-5 text-secondary-foreground\" />\n        </div>\n        <div>\n            <h3 className=\"font-semibold text-foreground\">{t('recommendationCard.reading')}</h3>\n            <p className=\"text-muted-foreground\">{recommendations.readingRecommendation}</p>\n        </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 742, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,2KAAgB,MAC/B,QAAwB;QAAvB,EAAC,SAAS,EAAE,GAAG,OAAM;IACpB,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 777, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/components/journal/journal-dialog.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useTranslation } from '../providers/language-provider';\n\ninterface JournalDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSave: (data: { notes: string }) => void;\n  mood: string | null;\n  loading: boolean;\n}\n\nexport function JournalDialog({ open, onOpenChange, onSave, mood, loading }: JournalDialogProps) {\n  const [notes, setNotes] = useState('');\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!open) {\n      setNotes('');\n    }\n  }, [open]);\n\n  const handleSave = () => {\n    onSave({ notes });\n  };\n\n  const handleClose = () => {\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>{t('journalDialog.title', { mood: mood })}</DialogTitle>\n          <DialogDescription>\n            {t('journalDialog.description')}\n          </DialogDescription>\n        </DialogHeader>\n        <div className='py-4'>\n          <Textarea\n            placeholder={t('journalDialog.placeholder')}\n            value={notes}\n            onChange={(e) => setNotes(e.target.value)}\n            rows={6}\n            disabled={loading}\n          />\n        </div>\n        <DialogFooter>\n          <div className='flex gap-2 w-full justify-end'>\n            <Button variant='outline' onClick={handleClose} disabled={loading}>\n              {t('journalDialog.cancel')}\n            </Button>\n            <Button onClick={handleSave} disabled={loading || !notes}>\n              {loading ? t('journalDialog.saving') : t('journalDialog.save')}\n            </Button>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAQA;AACA;AACA;;;AAZA;;;;;;AAsBO,SAAS,cAAc,KAAiE;QAAjE,EAAE,IAAI,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAsB,GAAjE;;IAC5B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,4KAAc;IAE5B,IAAA,0KAAS;mCAAC;YACR,IAAI,CAAC,MAAM;gBACT,SAAS;YACX;QACF;kCAAG;QAAC;KAAK;IAET,MAAM,aAAa;QACjB,OAAO;YAAE;QAAM;IACjB;IAEA,MAAM,cAAc;QAClB,aAAa;IACf;IAEA,qBACE,6LAAC,+IAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,6LAAC,sJAAa;;8BACZ,6LAAC,qJAAY;;sCACX,6LAAC,oJAAW;sCAAE,EAAE,uBAAuB;gCAAE,MAAM;4BAAK;;;;;;sCACpD,6LAAC,0JAAiB;sCACf,EAAE;;;;;;;;;;;;8BAGP,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,mJAAQ;wBACP,aAAa,EAAE;wBACf,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,MAAM;wBACN,UAAU;;;;;;;;;;;8BAGd,6LAAC,qJAAY;8BACX,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,+IAAM;gCAAC,SAAQ;gCAAU,SAAS;gCAAa,UAAU;0CACvD,EAAE;;;;;;0CAEL,6LAAC,+IAAM;gCAAC,SAAS;gCAAY,UAAU,WAAW,CAAC;0CAChD,UAAU,EAAE,0BAA0B,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOvD;GAjDgB;;QAEA,4KAAc;;;KAFd","debugId":null}},
    {"offset": {"line": 925, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/components/habits/habit-reminder.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useUser, useFirestore, useCollection, useMemoFirebase } from '@/firebase';\nimport { collection, query, where, getDocs, orderBy } from 'firebase/firestore';\nimport { useToast } from '@/hooks/use-toast';\nimport { format, subDays, parseISO, isSameDay } from 'date-fns';\nimport { useRouter } from 'next/navigation';\nimport { Button } from '../ui/button';\nimport { useTranslation } from '../providers/language-provider';\n\nexport function HabitReminder() {\n  const { user } = useUser();\n  const firestore = useFirestore();\n  const { toast } = useToast();\n  const router = useRouter();\n  const { t } = useTranslation();\n  const todayStr = format(new Date(), 'yyyy-MM-dd');\n  // State to hold the permission status\n  const [notificationPermission, setNotificationPermission] = useState<NotificationPermission>('default');\n\n  // Effect to check and request notification permission on mount\n  useEffect(() => {\n    // Check if Notifications are supported\n    if ('Notification' in window) {\n      setNotificationPermission(Notification.permission);\n      \n      // If permission is not yet granted or denied, ask the user\n      if (Notification.permission === 'default') {\n        \n        // We use a toast to ask for permission non-intrusively\n        const { dismiss } = toast({\n          title: t('habitReminder.permission.title'),\n          description: t('habitReminder.permission.description'),\n          duration: Infinity, // Keep toast open until user interacts\n          action: (\n            <Button variant=\"secondary\" size=\"sm\" onClick={handleRequestPermission}>\n                {t('habitReminder.permission.activate')}\n            </Button>\n          ),\n        });\n\n        // Function to handle the permission request flow\n        function handleRequestPermission() {\n          Notification.requestPermission().then(permission => {\n            setNotificationPermission(permission);\n            dismiss(); // Close the permission request toast\n            if (permission === 'granted') {\n              toast({\n                title: t('habitReminder.permission.granted.title'),\n                description: t('habitReminder.permission.granted.description'),\n              });\n            } else {\n               toast({\n                variant: 'destructive',\n                title: t('habitReminder.permission.denied.title'),\n                description: t('habitReminder.permission.denied.description'),\n              });\n            }\n          });\n        }\n      }\n    }\n  }, [t, toast]); // The empty dependency array ensures this runs only once on mount\n\n  const habitsQuery = useMemoFirebase(\n    () => user ? query(collection(firestore, 'users', user.uid, 'habits'), where('active', '==', true)) : null,\n    [firestore, user]\n  );\n  \n  const { data: activeHabits, isLoading } = useCollection(habitsQuery);\n\n  // This effect checks for pending habits and decides how to notify the user\n  useEffect(() => {\n    if (isLoading || !activeHabits || activeHabits.length === 0) {\n      return;\n    }\n\n    const checkPendingHabits = async () => {\n      let pendingHabits: any[] = [];\n      let longestStreak = 0;\n\n      for (const habit of activeHabits) {\n        const habitLogsRef = collection(firestore, 'users', user!.uid, 'habits', habit.id, 'habitLogs');\n        const todayLogQuery = query(habitLogsRef, where('date', '==', todayStr), where('completed', '==', true));\n        const todayLogSnapshot = await getDocs(todayLogQuery);\n\n        if (todayLogSnapshot.empty) {\n          // Habit is pending for today\n          pendingHabits.push(habit);\n          \n          // Calculate streak for this pending habit\n          const streakQuery = query(habitLogsRef, where('completed', '==', true));\n          const streakLogSnapshot = await getDocs(streakQuery);\n          \n          let currentStreak = 0;\n          if (!streakLogSnapshot.empty) {\n              const completedDates = [...new Set(streakLogSnapshot.docs.map(doc => doc.data().date as string))].sort().reverse();\n              \n              let dateToCheck = subDays(new Date(), 1); // Start checking from yesterday for a pending habit\n\n              for (const dateStr of completedDates) {\n                  if (dateStr === format(dateToCheck, 'yyyy-MM-dd')) {\n                      currentStreak++;\n                      dateToCheck = subDays(dateToCheck, 1);\n                  } else {\n                      break; // Gap found\n                  }\n              }\n          }\n          \n          if (currentStreak > longestStreak) {\n            longestStreak = currentStreak;\n          }\n        }\n      }\n\n      const pendingHabitCount = pendingHabits.length;\n\n      if (pendingHabitCount > 0) {\n        let title = t('habitReminder.toast.title');\n        let description = pendingHabitCount === 1 \n            ? t('habitReminder.toast.description.one')\n            : t('habitReminder.toast.description.many', { count: pendingHabitCount });\n\n        // \"Intelligent\" message based on streak\n        if (longestStreak === 6) {\n            title = t('habitReminder.toast.almostStreak');\n            description = t('habitReminder.toast.almostStreak.description');\n        } else if (longestStreak >= 2) {\n            title = t('habitReminder.toast.keepStreak');\n            description = t('habitReminder.toast.keepStreak.description', { streak: longestStreak });\n        }\n\n        // If permission is granted, use a native browser notification\n        if (notificationPermission === 'granted') {\n            const notification = new Notification(title, {\n                body: description,\n                icon: '/icon-192x192.png', // Uses the PWA icon\n                tag: 'habit-reminder', // Tag to prevent multiple notifications from stacking\n            });\n            // When notification is clicked, go to habits page and focus the window\n            notification.onclick = () => {\n                router.push('/habits');\n                window.focus();\n            };\n        } else {\n            // Fallback to the original toast notification if permission is not granted\n            toast({\n              title: title,\n              description: description,\n              duration: 10000, \n              action: (\n                <Button variant=\"secondary\" size=\"sm\" onClick={() => router.push('/habits')}>\n                    {t('habitReminder.toast.action')}\n                </Button>\n              ),\n            });\n        }\n      }\n    };\n\n    // We add a small delay to avoid showing the reminder immediately on page load\n    const timeoutId = setTimeout(checkPendingHabits, 5000);\n    \n    return () => clearTimeout(timeoutId);\n\n  }, [activeHabits, firestore, user, todayStr, toast, router, isLoading, notificationPermission, t]); // Re-run if permission changes\n\n  return null; // This component does not render anything visible\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1157, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/components/dashboard/proactive-cero.tsx"],"sourcesContent":["'use client';\n\nimport { useCollection } from '@/firebase/firestore/use-collection';\nimport { useUserProfile } from '@/hooks/useUserProfile';\nimport { useEffect, useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Lightbulb } from 'lucide-react';\nimport { Skeleton } from '../ui/skeleton';\nimport { limit, orderBy } from 'firebase/firestore';\n\ninterface ProactiveMessage {\n    shouldDisplay: boolean;\n    message: string;\n}\n\nexport function ProactiveCero() {\n    const { user, isLoading: isUserLoading } = useUserProfile();\n    \n    // Fetch the last 15 mood entries to find patterns\n    const { data: moodHistory, isLoading: isHistoryLoading } = useCollection(\n        user ? `users/${user.uid}/moodHistory` : null,\n        [\n            limit(15), \n            orderBy('createdAt', 'desc')\n        ]\n    );\n\n    const [proactiveMessage, setProactiveMessage] = useState<ProactiveMessage | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        // Check if we already showed a message in the last 24 hours\n        const lastShown = localStorage.getItem('proactiveCeroLastShown');\n        const now = new Date().getTime();\n\n        if (lastShown && (now - Number(lastShown) < 24 * 60 * 60 * 1000)) {\n            setIsLoading(false);\n            return;\n        }\n\n        if (!isUserLoading && !isHistoryLoading && user && moodHistory && moodHistory.length > 5) {\n            const formattedHistory = moodHistory.map(entry => ({\n                date: new Date(entry.createdAt.seconds * 1000).toLocaleDateString(),\n                mood: entry.mood,\n            }));\n\n            fetch('/api/run-flow', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ history: formattedHistory, userName: user.displayName || 'there' }),\n            })\n            .then(res => {\n                if (!res.ok) {\n                    throw new Error(`API call failed with status: ${res.status}`);\n                }\n                return res.json();\n            })\n            .then(setProactiveMessage)\n            .catch(console.error)\n            .finally(() => setIsLoading(false));\n            \n             // Set the timestamp once we've run the flow\n             localStorage.setItem('proactiveCeroLastShown', String(now));\n        } else if (!isUserLoading && !isHistoryLoading) {\n            // Don't show if there isn't enough data\n            setIsLoading(false);\n        }\n\n    }, [user, moodHistory, isUserLoading, isHistoryLoading]);\n\n    if (isLoading) {\n        return <Skeleton className=\"h-24 w-full\" />;\n    }\n\n    if (!proactiveMessage || !proactiveMessage.shouldDisplay) {\n        return null; // Don't render anything if no message should be displayed\n    }\n\n    return (\n        <Card className=\"bg-accent/50 border-accent\">\n            <CardHeader>\n                <CardTitle className=\"flex items-center gap-3 text-accent-foreground\">\n                    <Lightbulb className=\"h-6 w-6 text-accent\" />\n                    <span>A Thought from Cero</span>\n                </CardTitle>\n            </CardHeader>\n            <CardContent>\n                <p className=\"text-lg text-accent-foreground/90\">\n                    {proactiveMessage.message}\n                </p>\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;AARA;;;;;;;;AAeO,SAAS;;IACZ,MAAM,EAAE,IAAI,EAAE,WAAW,aAAa,EAAE,GAAG,IAAA,mJAAc;IAEzD,kDAAkD;IAClD,MAAM,EAAE,MAAM,WAAW,EAAE,WAAW,gBAAgB,EAAE,GAAG,IAAA,sKAAa,EACpE,OAAO,AAAC,SAAiB,OAAT,KAAK,GAAG,EAAC,kBAAgB,MACzC;QACI,IAAA,+KAAK,EAAC;QACN,IAAA,iLAAO,EAAC,aAAa;KACxB;IAGL,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAA0B;IAClF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;mCAAC;YACN,4DAA4D;YAC5D,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,MAAM,MAAM,IAAI,OAAO,OAAO;YAE9B,IAAI,aAAc,MAAM,OAAO,aAAa,KAAK,KAAK,KAAK,MAAO;gBAC9D,aAAa;gBACb;YACJ;YAEA,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,QAAQ,eAAe,YAAY,MAAM,GAAG,GAAG;gBACtF,MAAM,mBAAmB,YAAY,GAAG;gEAAC,CAAA,QAAS,CAAC;4BAC/C,MAAM,IAAI,KAAK,MAAM,SAAS,CAAC,OAAO,GAAG,MAAM,kBAAkB;4BACjE,MAAM,MAAM,IAAI;wBACpB,CAAC;;gBAED,MAAM,iBAAiB;oBACnB,QAAQ;oBACR,SAAS;wBACL,gBAAgB;oBACpB;oBACA,MAAM,KAAK,SAAS,CAAC;wBAAE,SAAS;wBAAkB,UAAU,KAAK,WAAW,IAAI;oBAAQ;gBAC5F,GACC,IAAI;+CAAC,CAAA;wBACF,IAAI,CAAC,IAAI,EAAE,EAAE;4BACT,MAAM,IAAI,MAAM,AAAC,gCAA0C,OAAX,IAAI,MAAM;wBAC9D;wBACA,OAAO,IAAI,IAAI;oBACnB;8CACC,IAAI,CAAC,qBACL,KAAK,CAAC,QAAQ,KAAK,EACnB,OAAO;+CAAC,IAAM,aAAa;;gBAE3B,4CAA4C;gBAC5C,aAAa,OAAO,CAAC,0BAA0B,OAAO;YAC3D,OAAO,IAAI,CAAC,iBAAiB,CAAC,kBAAkB;gBAC5C,wCAAwC;gBACxC,aAAa;YACjB;QAEJ;kCAAG;QAAC;QAAM;QAAa;QAAe;KAAiB;IAEvD,IAAI,WAAW;QACX,qBAAO,6LAAC,mJAAQ;YAAC,WAAU;;;;;;IAC/B;IAEA,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,aAAa,EAAE;QACtD,OAAO,MAAM,0DAA0D;IAC3E;IAEA,qBACI,6LAAC,2IAAI;QAAC,WAAU;;0BACZ,6LAAC,iJAAU;0BACP,cAAA,6LAAC,gJAAS;oBAAC,WAAU;;sCACjB,6LAAC,4NAAS;4BAAC,WAAU;;;;;;sCACrB,6LAAC;sCAAK;;;;;;;;;;;;;;;;;0BAGd,6LAAC,kJAAW;0BACR,cAAA,6LAAC;oBAAE,WAAU;8BACR,iBAAiB,OAAO;;;;;;;;;;;;;;;;;AAK7C;GAhFgB;;QAC+B,mJAAc;QAGE,sKAAa;;;KAJ5D","debugId":null}},
    {"offset": {"line": 1319, "column": 0}, "map": {"version":3,"sources":["file:///home/user/CERO/src/app/%28main%29/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { getPersonalizedRecommendations, type PersonalizedRecommendationsOutput } from '@/ai/flows/personalized-recommendations';\nimport { CeroBot } from '@/components/dashboard/cero-bot';\nimport { MoodSelector } from '@/components/dashboard/mood-selector';\nimport { RecommendationCard } from '@/components/dashboard/recommendation-card';\nimport { useToast } from '@/hooks/use-toast';\nimport { JournalDialog } from '@/components/journal/journal-dialog';\nimport { useUser, useFirestore } from '@/firebase';\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { HabitReminder } from '@/components/habits/habit-reminder';\nimport { useTranslation } from '@/components/providers/language-provider';\nimport { ProactiveCero } from '@/components/dashboard/proactive-cero';\n\nexport default function DashboardPage() {\n  const [mood, setMood] = useState<string | null>(null);\n  const [recommendations, setRecommendations] = useState<PersonalizedRecommendationsOutput | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [isJournalOpen, setIsJournalOpen] = useState(false);\n  const { toast } = useToast();\n  const { user } = useUser();\n  const firestore = useFirestore();\n  const { t } = useTranslation();\n\n  const handleMoodSelect = async (selectedMood: string) => {\n    if (loading) return;\n    setMood(selectedMood);\n    setRecommendations(null);\n    setIsJournalOpen(true); // Open journal dialog\n  };\n\n  const handleJournalSave = async (data: { notes: string }) => {\n    if (!mood || !user) return;\n\n    setLoading(true);\n    setRecommendations(null);\n    setIsJournalOpen(false);\n\n    try {\n      // Save mood log with notes to Firestore\n      const moodLogRef = collection(firestore, 'users', user.uid, 'moodHistory');\n      await addDoc(moodLogRef, {\n        userId: user.uid,\n        mood: mood,\n        notes: data.notes,\n        createdAt: serverTimestamp(),\n      });\n\n      toast({\n        title: t('dashboard.journalSave.toast.title'),\n        description: t('dashboard.journalSave.toast.description'),\n      });\n\n      // Fetch personalized recommendations using text only\n      const result = await getPersonalizedRecommendations({\n        mood,\n        journalText: data.notes,\n      });\n      setRecommendations(result);\n\n    } catch (error) {\n      console.error('Error al obtener las recomendaciones:', error);\n      toast({\n        variant: 'destructive',\n        title: t('dashboard.recommendationError.toast.title'),\n        description: t('dashboard.recommendationError.toast.description'),\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className='flex flex-col items-center gap-8 text-center'>\n      <HabitReminder />\n      {user?.uid &&\n        <div className='w-full max-w-2xl'>\n          <ProactiveCero />\n        </div>\n      }\n      <CeroBot />\n      <div className='space-y-2'>\n          <h2 className='text-2xl font-bold tracking-tight text-foreground sm:text-3xl font-headline'>{t('dashboard.title')}</h2>\n          <p className='text-muted-foreground'>{t('dashboard.description')}</p>\n      </div>\n      <MoodSelector\n        onMoodSelect={handleMoodSelect}\n        selectedMood={mood}\n        disabled={loading}\n      />\n\n      {mood && (\n        <JournalDialog\n          open={isJournalOpen}\n          onOpenChange={setIsJournalOpen}\n          onSave={handleJournalSave}\n          mood={mood}\n          loading={loading}\n        />\n      )}\n      \n      {(loading || recommendations) && (\n          <div className='w-full flex justify-center pt-8'>\n              <RecommendationCard \n                loading={loading} \n                recommendations={recommendations} \n                mood={mood} \n              />\n          </div>\n      )}\n\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;AAbA;;;;;;;;;;;;;AAee,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAgB;IAChD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAA2C;IACjG,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,2IAAQ;IAC1B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0IAAO;IACxB,MAAM,YAAY,IAAA,+IAAY;IAC9B,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,4KAAc;IAE5B,MAAM,mBAAmB,OAAO;QAC9B,IAAI,SAAS;QACb,QAAQ;QACR,mBAAmB;QACnB,iBAAiB,OAAO,sBAAsB;IAChD;IAEA,MAAM,oBAAoB,OAAO;QAC/B,IAAI,CAAC,QAAQ,CAAC,MAAM;QAEpB,WAAW;QACX,mBAAmB;QACnB,iBAAiB;QAEjB,IAAI;YACF,wCAAwC;YACxC,MAAM,aAAa,IAAA,oLAAU,EAAC,WAAW,SAAS,KAAK,GAAG,EAAE;YAC5D,MAAM,IAAA,gLAAM,EAAC,YAAY;gBACvB,QAAQ,KAAK,GAAG;gBAChB,MAAM;gBACN,OAAO,KAAK,KAAK;gBACjB,WAAW,IAAA,yLAAe;YAC5B;YAEA,MAAM;gBACJ,OAAO,EAAE;gBACT,aAAa,EAAE;YACjB;YAEA,qDAAqD;YACrD,MAAM,SAAS,MAAM,IAAA,+LAA8B,EAAC;gBAClD;gBACA,aAAa,KAAK,KAAK;YACzB;YACA,mBAAmB;QAErB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yCAAyC;YACvD,MAAM;gBACJ,SAAS;gBACT,OAAO,EAAE;gBACT,aAAa,EAAE;YACjB;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,qKAAa;;;;;YACb,CAAA,iBAAA,2BAAA,KAAM,GAAG,mBACR,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,wKAAa;;;;;;;;;;0BAGlB,6LAAC,4JAAO;;;;;0BACR,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCAA+E,EAAE;;;;;;kCAC/F,6LAAC;wBAAE,WAAU;kCAAyB,EAAE;;;;;;;;;;;;0BAE5C,6LAAC,sKAAY;gBACX,cAAc;gBACd,cAAc;gBACd,UAAU;;;;;;YAGX,sBACC,6LAAC,sKAAa;gBACZ,MAAM;gBACN,cAAc;gBACd,QAAQ;gBACR,MAAM;gBACN,SAAS;;;;;;YAIZ,CAAC,WAAW,eAAe,mBACxB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,kLAAkB;oBACjB,SAAS;oBACT,iBAAiB;oBACjB,MAAM;;;;;;;;;;;;;;;;;AAOtB;GAnGwB;;QAKJ,2IAAQ;QACT,0IAAO;QACN,+IAAY;QAChB,4KAAc;;;KARN","debugId":null}}]
}